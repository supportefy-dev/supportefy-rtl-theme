{% liquid
  assign wa_number = settings.whatsapp_number | default: ''
  assign wa_message = settings.whatsapp_message | default: ''
%}

{% if wa_number != blank %}
  <div class="whatsapp-button rotate-icon">
    <a href="https://wa.me/{{ wa_number | remove: '+' }}{% if wa_message != blank %}?text={{ wa_message | url_encode }}{% endif %}" target="_blank" rel="noopener" aria-label="WhatsApp">
      <svg viewBox="0 0 24 24" width="48" height="48" fill="currentColor" aria-hidden="true">
        <path d="M20.5 3.5A11.5 11.5 0 0 0 3.15 17.84L2 22l4.24-1.11A11.5 11.5 0 1 0 20.5 3.5zM12 20.5a8.45 8.45 0 0 1-4.29-1.17l-.31-.18-2.53.66.68-2.47-.2-.32a8.45 8.45 0 1 1 6.65 3.48z"/>
        <path d="M17 14.51c-.29-.15-1.71-.84-1.97-.94s-.46-.15-.65.15-.75.94-.92 1.13-.34.21-.63.07a7 7 0 0 1-3.63-3.17c-.27-.46.27-.43.78-1.43.09-.19 0-.36-.05-.51s-.65-1.56-.89-2.14-.48-.47-.66-.48h-.57a1.1 1.1 0 0 0-.8.37 3.35 3.35 0 0 0-1 2.47 5.81 5.81 0 0 0 1.22 3.07 13.23 13.23 0 0 0 5 4.3 5.9 5.9 0 0 0 3.61 1.1 3.33 3.33 0 0 0 2.18-.73 2.72 2.72 0 0 0 .61-1.9c-.03-.18-.26-.29-.55-.44z"/>
      </svg>
    </a>
  </div>

  <style>
    .whatsapp-button {
      position: fixed;
      bottom: 4rem;
      right: 1rem;
      z-index: 999;
    }
    .whatsapp-button a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      background-color: #25D366;
      color: #fff;
      text-decoration: none;
    }
  </style>
{% endif %}
